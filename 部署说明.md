# Baby Core Docker éƒ¨ç½²è¯´æ˜

## ğŸ¯ éƒ¨ç½²å·²é…ç½®å®Œæˆï¼

æ‰€æœ‰ Docker éƒ¨ç½²æ–‡ä»¶å·²å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥ç›´æ¥éƒ¨ç½²åˆ°æ‚¨çš„ Debian 12 æœåŠ¡å™¨ã€‚

## ğŸ“¦ éƒ¨ç½²é…ç½®

- **åç«¯ç«¯å£**: 8899
- **å‰ç«¯è·¯å¾„**: /baby-core
- **è®¿é—®åœ°å€**: http://your-server-ip/baby-core
- **API åœ°å€**: http://your-server-ip/baby-core/api

## ğŸš€ å¿«é€Ÿéƒ¨ç½²ï¼ˆ3 æ­¥éª¤ï¼‰

### 1ï¸âƒ£ ä¸Šä¼ é¡¹ç›®åˆ°æœåŠ¡å™¨

```bash
# åœ¨æœ¬åœ°æ‰“åŒ…
cd baby-core
tar -czf baby-core.tar.gz .

# ä¸Šä¼ åˆ°æœåŠ¡å™¨
scp baby-core.tar.gz user@your-server:/home/user/

# åœ¨æœåŠ¡å™¨ä¸Šè§£å‹
ssh user@your-server
mkdir baby-core && cd baby-core
tar -xzf ../baby-core.tar.gz
```

### 2ï¸âƒ£ é…ç½®å¹¶éƒ¨ç½²

```bash
# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
nano .env  # ä¿®æ”¹ JWT_SECRET

# ä¸€é”®éƒ¨ç½²
chmod +x deploy.sh
./deploy.sh
```

### 3ï¸âƒ£ åˆ›å»ºç”¨æˆ·

```bash
# åˆ›å»ºé»˜è®¤ç”¨æˆ·ï¼ˆadmin/admin123ï¼‰
chmod +x init-user-simple.sh
./init-user-simple.sh
```

## ğŸŒ è®¿é—®åº”ç”¨

```
http://your-server-ip/baby-core
```

é»˜è®¤ç™»å½•ï¼š
- ç”¨æˆ·å: **admin**
- å¯†ç : **admin123**

âš ï¸ **è¯·ç™»å½•åç«‹å³ä¿®æ”¹å¯†ç ï¼**

## ğŸ“š è¯¦ç»†æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| **DEPLOY_README.md** | ğŸ“– **ä»è¿™é‡Œå¼€å§‹** - éƒ¨ç½²å…¥å£æ–‡æ¡£ |
| QUICKSTART_DOCKER.md | âš¡ 5åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½² |
| SERVER_SETUP.md | ğŸ–¥ï¸ Debian 12 æœåŠ¡å™¨é…ç½® |
| DEPLOYMENT_DOCKER.md | ğŸ“‹ å®Œæ•´éƒ¨ç½²æŒ‡å— |
| DOCKER_DEPLOYMENT_README.md | ğŸ—ï¸ æ¶æ„å’Œé…ç½®è¯´æ˜ |
| DEPLOYMENT_SUMMARY.md | ğŸ“Š éƒ¨ç½²æ€»ç»“ |
| DOCKER_DEPLOYMENT_FILES.md | ğŸ“ æ–‡ä»¶æ¸…å• |

## ğŸ”§ ä¸»è¦è„šæœ¬

| è„šæœ¬ | ç”¨é€” |
|------|------|
| `deploy.sh` | ä¸€é”®éƒ¨ç½² |
| `init-user-simple.sh` | åˆ›å»ºé»˜è®¤ç”¨æˆ· |
| `init-user.sh` | åˆ›å»ºè‡ªå®šä¹‰ç”¨æˆ· |
| `verify-deployment.sh` | éªŒè¯éƒ¨ç½² |

## ğŸ“Š æ¶æ„è¯´æ˜

```
ç”¨æˆ·æµè§ˆå™¨
    â”‚
    â”‚ è®¿é—®: http://server/baby-core
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Nginx     â”‚ ç«¯å£ 80
â”‚  (å®¹å™¨)     â”‚ åå‘ä»£ç†
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ ä»£ç†åˆ°: http://baby-core:8899
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Baby-Core   â”‚ ç«¯å£ 8899
â”‚   åç«¯      â”‚ Go + Vue.js
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ æ•°æ®å­˜å‚¨
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SQLite    â”‚
â”‚  æ•°æ®åº“     â”‚ ./data/baby_tracker.db
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âš™ï¸ é…ç½®è¦ç‚¹

### å¿…é¡»ä¿®æ”¹çš„é…ç½®

1. **JWT Secret** (åœ¨ `.env` æ–‡ä»¶ä¸­)
   ```bash
   # ç”Ÿæˆå¼ºå¯†ç 
   openssl rand -base64 32
   
   # å†™å…¥ .env
   JWT_SECRET=ç”Ÿæˆçš„å¯†ç 
   ```

2. **é»˜è®¤ç”¨æˆ·å¯†ç **
   - é¦–æ¬¡ç™»å½•åç«‹å³ä¿®æ”¹

### ç¯å¢ƒå˜é‡è¯´æ˜

```env
# .env æ–‡ä»¶
JWT_SECRET=your-secret-key-here    # å¿…é¡»ä¿®æ”¹ï¼
PORT=8899                          # åç«¯ç«¯å£
DB_PATH=/app/data/baby_tracker.db  # æ•°æ®åº“è·¯å¾„
TZ=Asia/Shanghai                   # æ—¶åŒº
```

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# é‡å¯æœåŠ¡
docker-compose restart

# åœæ­¢æœåŠ¡
docker-compose down

# æ›´æ–°å¹¶é‡å¯
docker-compose down
docker-compose up -d --build

# å¤‡ä»½æ•°æ®
cp data/baby_tracker.db backups/backup-$(date +%Y%m%d).db
```

## âœ… éƒ¨ç½²éªŒè¯

```bash
# è¿è¡ŒéªŒè¯è„šæœ¬
./verify-deployment.sh

# åº”è¯¥çœ‹åˆ°ï¼š
# âœ“ Docker å·²å®‰è£…
# âœ“ Baby Core å®¹å™¨è¿è¡Œä¸­
# âœ“ Nginx å®¹å™¨è¿è¡Œä¸­
# âœ“ åç«¯æœåŠ¡å“åº”æ­£å¸¸
# âœ“ å‰ç«¯æœåŠ¡å“åº”æ­£å¸¸
# ğŸ‰ æ‰€æœ‰æ£€æŸ¥é€šè¿‡ï¼éƒ¨ç½²æˆåŠŸï¼
```

## ğŸ”’ å®‰å…¨å»ºè®®

### å¿…é¡»åš

- âœ… ä¿®æ”¹ `.env` ä¸­çš„ `JWT_SECRET`
- âœ… ä¿®æ”¹é»˜è®¤å¯†ç  `admin123`
- âœ… é…ç½®é˜²ç«å¢™ï¼Œåªå¼€æ”¾å¿…è¦ç«¯å£

### å»ºè®®åš

- â­ é…ç½® HTTPS (ä½¿ç”¨ Let's Encrypt å…è´¹è¯ä¹¦)
- â­ è®¾ç½®å®šæœŸæ•°æ®å¤‡ä»½
- â­ å®šæœŸæ›´æ–°ç³»ç»Ÿå’Œ Docker é•œåƒ

### é˜²ç«å¢™é…ç½®

```bash
# å®‰è£…é˜²ç«å¢™
sudo apt install ufw

# é…ç½®è§„åˆ™
sudo ufw allow ssh
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp

# å¯ç”¨é˜²ç«å¢™
sudo ufw enable
```

## ğŸ“± åŠŸèƒ½è¯´æ˜

### ä¸»è¦åŠŸèƒ½

- ğŸ‘¶ **å®å®è®°å½•**: å–‚å¥¶ã€æ¢å°¿å¸ƒã€ç¡çœ ã€ä½“æ¸©ç­‰
- ğŸ“Š **æ•°æ®ç»Ÿè®¡**: æ¯æ—¥ã€æ¯å‘¨ç»Ÿè®¡åˆ†æ
- â±ï¸ **è®¡æ—¶å™¨**: å–‚å¥¶è®¡æ—¶ã€ç¡çœ è®¡æ—¶
- ğŸ“± **ç§»åŠ¨å‹å¥½**: å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒæ‰‹æœºè®¿é—®

### è®¿é—®è·¯å¾„

- é¦–é¡µ: `/baby-core`
- ç™»å½•: `/baby-core/login`
- API: `/baby-core/api/*`

## ğŸ†˜ æ•…éšœæ’æŸ¥

### æ— æ³•è®¿é—®

```bash
# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker-compose ps

# æ£€æŸ¥é˜²ç«å¢™
sudo ufw status

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

### ç™»å½•å¤±è´¥

```bash
# é‡æ–°åˆ›å»ºç”¨æˆ·
./init-user-simple.sh
```

### æ•°æ®åº“é”™è¯¯

```bash
# æ£€æŸ¥æƒé™
ls -la data/

# é‡æ–°åˆå§‹åŒ–ï¼ˆä¼šä¸¢å¤±æ•°æ®ï¼ï¼‰
docker-compose down
rm -f data/baby_tracker.db
docker-compose up -d
./init-user-simple.sh
```

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

1. **æŸ¥çœ‹æ—¥å¿—**: `docker-compose logs -f`
2. **è¿è¡ŒéªŒè¯**: `./verify-deployment.sh`
3. **æŸ¥é˜…æ–‡æ¡£**: å‚è€ƒä¸Šé¢åˆ—å‡ºçš„è¯¦ç»†æ–‡æ¡£
4. **é‡æ–°éƒ¨ç½²**: `./deploy.sh`

## ğŸ“ å­¦ä¹ è·¯å¾„

### å¿«é€Ÿå¼€å§‹ç”¨æˆ·
```
DEPLOY_README.md â†’ QUICKSTART_DOCKER.md â†’ æ‰§è¡Œéƒ¨ç½² â†’ å®Œæˆï¼
```

### ç”Ÿäº§ç¯å¢ƒç”¨æˆ·
```
DEPLOY_README.md â†’ SERVER_SETUP.md â†’ DEPLOYMENT_DOCKER.md â†’ å®Œæˆï¼
```

## ğŸ“ ä¸‹ä¸€æ­¥

1. âœ… å®Œæˆéƒ¨ç½²
2. âœ… åˆ›å»ºç”¨æˆ·
3. âœ… ç™»å½•å¹¶ä¿®æ”¹å¯†ç 
4. âœ… ç†Ÿæ‚‰åŠŸèƒ½
5. âœ… é…ç½® HTTPSï¼ˆå¯é€‰ï¼‰
6. âœ… è®¾ç½®å¤‡ä»½ï¼ˆå¯é€‰ï¼‰
7. âœ… é‚€è¯·å®¶äººä½¿ç”¨

## ğŸ‰ å¼€å§‹ä½¿ç”¨

ç°åœ¨æ‚¨å·²ç»äº†è§£äº†æ‰€æœ‰éƒ¨ç½²ä¿¡æ¯ï¼

**ç«‹å³å¼€å§‹** â†’ é˜…è¯» [`DEPLOY_README.md`](./DEPLOY_README.md)

æˆ–è€…ç›´æ¥æ‰§è¡Œå¿«é€Ÿéƒ¨ç½²ï¼š

```bash
cp .env.example .env && nano .env
chmod +x deploy.sh && ./deploy.sh
chmod +x init-user-simple.sh && ./init-user-simple.sh
```

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼Happy Baby Tracking! ğŸ‘¶**

**éƒ¨ç½²ç‰ˆæœ¬**: 1.0.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-10-27  
**é€‚ç”¨ç³»ç»Ÿ**: Debian 12 / Ubuntu 20.04+ / CentOS 8+

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£æˆ–è¿è¡ŒéªŒè¯è„šæœ¬ã€‚

