# ⏱️ 喂奶计时器功能说明

## 🆕 新功能概述

为母乳喂养（母乳-左、母乳-右）添加了计时器功能，可以精确记录喂养的开始和结束时间。

---

## ✨ 功能特性

### 1. 实时计时
- 点击"母乳-左"或"母乳-右"后，显示计时器界面
- 点击"开始计时"按钮开始计时
- 实时显示已过时间（格式：分钟:秒）

### 2. 快捷目标设置
计时开始后，可以设置目标时间：
- **+1分钟**: 增加1分钟目标
- **+5分钟**: 增加5分钟目标  
- **+10分钟**: 增加10分钟目标

可以多次点击累加目标时间。

### 3. 到点提醒
- 当达到设定的目标时间时，自动播放提示音（两声"哔哔"）
- 计时器继续运行，不会停止
- 可以继续喂养，直到点击"结束并保存"

### 4. 精确记录
记录内容包括：
- 喂养类型（母乳-左/母乳-右）
- 开始时间
- 结束时间
- 实际时长（分钟）
- 目标时长（如果设置了）
- 备注（可选）

---

## 📱 使用流程

### 母乳喂养（计时器模式）

```
1. 点击"母乳-左"或"母乳-右"
   ↓
2. 弹出计时器界面，显示 0:00
   ↓
3. 点击"开始计时"按钮
   ↓
4. 计时器开始运行
   ↓
5. （可选）点击 +10分钟 / +5分钟 / +1分钟 设置目标
   ↓
6. 到达目标时间，播放提示音（"哔哔"两声）
   ↓
7. 继续喂养...
   ↓
8. 点击"结束并保存"
   ↓
9. 记录保存成功 ✅
```

### 奶瓶喂养（普通模式）

```
1. 点击"奶瓶"
   ↓
2. 输入奶量（ml）
   ↓
3. 点击"保存"
   ↓
4. 记录保存成功 ✅
```

---

## 🎨 界面设计

### 计时器显示
- **大号时间显示**: 48px 等宽字体，清晰易读
- **目标时间提示**: 在时间下方显示"目标: X:XX"
- **简洁背景**: 记事本风格，米色背景

### 按钮设计
- **开始计时**: 绿色大按钮，醒目
- **快捷时间**: 蓝色横向排列，方便点击
- **结束并保存**: 主按钮，棕色

### 状态管理
- 未开始：显示"开始计时"按钮
- 计时中：显示快捷时间按钮和"结束并保存"
- 未开始前，"结束并保存"按钮禁用

---

## 📊 数据存储

### 计时器模式记录格式

```json
{
  "method": "breast_left",
  "start_time": "2025-10-28T10:30:00.000Z",
  "end_time": "2025-10-28T10:45:30.000Z",
  "duration_minutes": 16,
  "target_minutes": 15
}
```

### 普通模式记录格式

```json
{
  "method": "bottle",
  "amount_ml": 120
}
```

---

## 🔊 提示音功能

### 技术实现
使用 Web Audio API 生成提示音：
- 频率: 800Hz 正弦波
- 音量: 30%
- 时长: 0.5秒 x 2次
- 间隔: 0.6秒

### 浏览器兼容性
- ✅ Chrome / Edge
- ✅ Safari
- ✅ Firefox
- ⚠️ 部分旧版浏览器可能不支持

如果浏览器不支持，会在控制台显示警告，但不影响其他功能。

---

## 📝 显示格式

### 历史记录显示

**计时器模式**:
```
母乳-左 10:30 - 10:46 (16分钟) 目标15分
```

**普通模式**:
```
母乳-右 10分钟
奶瓶 120ml
```

---

## 🎯 设计特点

1. **简约**: 界面清爽，无多余元素
2. **直观**: 大字体、清晰的按钮
3. **灵活**: 可以不设目标直接使用
4. **实用**: 记录开始结束时间，方便回顾
5. **友好**: 到点提醒，但不打断喂养

---

## 🔄 与原有功能对比

| 功能 | 原有方式 | 新计时器 |
|------|---------|---------|
| 记录方式 | 手动输入时长 | 自动计时 |
| 时间精度 | 估算 | 精确到秒 |
| 开始时间 | 不记录 | 记录 |
| 结束时间 | 不记录 | 记录 |
| 目标提醒 | 无 | 有 |
| 提示音 | 无 | 有 |

---

## 💡 使用建议

1. **设置目标时间**: 根据宝宝月龄设置合理的目标（如10-15分钟）
2. **不要中断**: 计时器启动后，即使到点也继续喂到宝宝吃饱
3. **记录备注**: 可以记录宝宝的表现（如"吃得很好"、"中途睡着了"等）
4. **查看历史**: 通过历史记录了解宝宝的喂养规律

---

## 🐛 已知限制

1. **单个计时器**: 一次只能记录一侧，如需换边需结束当前记录
2. **页面刷新**: 刷新页面会丢失未保存的计时（请及时保存）
3. **后台运行**: 切换到其他标签页，计时继续但提示音可能不响

---

## 🔧 故障排查

### 提示音不响
- 检查浏览器是否静音
- 检查系统音量
- 尝试在其他浏览器中打开

### 计时不准确
- 确保系统时间正确
- 避免在网络不稳定时使用

### 按钮无响应
- 刷新页面重试
- 清除浏览器缓存

---

**更新时间**: 2025-10-28  
**版本**: v1.1.0

