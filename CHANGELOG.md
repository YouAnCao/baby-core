# 更新日志

## [v1.1.0] - 2025-10-28

### 🆕 新增功能

#### ⏱️ 喂奶计时器
为母乳喂养添加了完整的计时器功能：

**核心功能**:
- ✅ 实时计时显示（大号易读数字）
- ✅ 快捷目标设置（+1min, +5min, +10min）
- ✅ 到点提示音（双音"哔哔"）
- ✅ 精确记录开始和结束时间
- ✅ 计时器到点后继续运行

**界面优化**:
- ✅ 简约的计时器界面
- ✅ 等宽字体显示时间
- ✅ 清晰的目标时间提示
- ✅ 直观的操作按钮

**数据记录**:
- ✅ 记录开始时间
- ✅ 记录结束时间
- ✅ 自动计算实际时长
- ✅ 保存目标时长（如设置）

### 🔧 改进

#### 前端 (Vue 3)
- 更新 `QuickEntry.vue` 组件
  - 添加计时器状态管理
  - 实现 Web Audio API 提示音
  - 支持动态目标时间设置
  - 添加计时器生命周期管理

- 更新 `RecordList.vue` 组件
  - 支持新的时间格式显示
  - 显示开始-结束时间范围
  - 显示目标时间（如有）

#### 后端 (Golang)
- 保持向后兼容
- 支持新的 details 字段格式
- 同时支持计时器模式和普通模式

### 📚 文档

新增文档：
- `TIMER_FEATURE.md` - 计时器功能完整说明
- `TIMER_TEST_GUIDE.md` - 测试指南
- `CHANGELOG.md` - 更新日志（本文件）

### 🎨 UI/UX

**计时器界面**:
```
┌─────────────────────┐
│   母乳-左           │
├─────────────────────┤
│                     │
│      15:30          │  ← 48px 大号显示
│   目标: 15:00       │  ← 目标时间提示
│                     │
├─────────────────────┤
│  ┌────────────────┐ │
│  │   开始计时      │ │  ← 未开始
│  └────────────────┘ │
│                     │
│  或                 │
│                     │
│ ┌───┬────┬────────┐│
│ │+1 │ +5 │  +10   ││  ← 计时中
│ │分 │ 分 │  分    ││
│ └───┴────┴────────┘│
│                     │
├─────────────────────┤
│  备注：             │
│  ┌────────────────┐│
│  │                ││
│  └────────────────┘│
├─────────────────────┤
│  [取消] [结束并保存]│
└─────────────────────┘
```

### 🔊 提示音

**特性**:
- 频率: 800Hz
- 音量: 30%
- 时长: 0.5秒 x 2次
- 间隔: 600ms
- 温和不刺耳

**兼容性**:
- ✅ Chrome / Edge
- ✅ Safari
- ✅ Firefox
- ⚠️ 旧版浏览器降级（无声音但功能正常）

### 📊 数据格式变化

#### 新增字段（计时器模式）
```json
{
  "method": "breast_left",
  "start_time": "2025-10-28T10:30:00.000Z",  // 新增
  "end_time": "2025-10-28T10:45:00.000Z",    // 新增
  "duration_minutes": 15,
  "target_minutes": 15                        // 新增（可选）
}
```

#### 兼容旧格式
```json
{
  "method": "breast_left",
  "duration_minutes": 15
}
```

### ⚠️ 破坏性变更

无。完全向后兼容。

### 🐛 Bug 修复

无新 bug。

### 🔒 安全性

无变更。

### 📈 性能

- 计时器使用 `setInterval`，每秒更新一次
- 音频使用 Web Audio API，性能优异
- 无明显性能影响

### 🧪 测试

已测试：
- ✅ 计时准确性
- ✅ 提示音播放
- ✅ 数据保存
- ✅ 向后兼容
- ✅ 多浏览器支持

### 📝 使用说明

详见：
- `TIMER_FEATURE.md` - 完整功能说明
- `TIMER_TEST_GUIDE.md` - 测试指南
- `ACCESS_GUIDE.md` - 访问指南

---

## [v1.0.0] - 2025-10-27

### 🎉 初始版本

#### 核心功能
- ✅ 用户登录认证（JWT）
- ✅ 喂养记录（母乳左/右、奶瓶）
- ✅ 尿布记录（尿尿、粑粑）
- ✅ 历史记录查看
- ✅ 按日期筛选

#### 技术栈
- **后端**: Go 1.21+, Chi Router, SQLite3
- **前端**: Vue 3, Vite, Pinia, Axios
- **数据库**: SQLite

#### 安全特性
- JWT Token 认证
- MD5+Salt 密码加密
- 用户数据隔离
- CORS 配置

#### UI 特色
- 记事本风格设计
- 大字体易读
- 快速操作按钮
- 响应式布局

---

## 版本规则

格式: `[主版本].[次版本].[修订版本]`

- **主版本**: 重大功能变更或架构升级
- **次版本**: 新功能添加
- **修订版本**: Bug 修复和小改进

---

## 未来计划

### v1.2.0 (计划中)
- [ ] 睡眠记录功能
- [ ] 体重/身高追踪
- [ ] 数据统计图表

### v2.0.0 (远期)
- [ ] AI 分析集成
- [ ] 7天数据对比
- [ ] 数据导出功能
- [ ] PWA 支持

---

**维护者**: Lyon Cao  
**项目地址**: ~/dev/python/baby-core  
**最后更新**: 2025-10-28

